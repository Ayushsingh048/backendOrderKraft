<div class="max-w-xl mx-auto mt-10 bg-white p-8 rounded-xl shadow-md">
  <h2 class="text-2xl font-bold mb-6 text-center">Register a New User</h2>

  <form [formGroup]="userForm" (ngSubmit)="submitForm()" novalidate>
    
    <!-- Username -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold">Username</label>
      <input type="text" formControlName="username" class="w-full border p-2 rounded"
             [ngClass]="{'border-red-500': isSubmitted && userForm.get('username')?.invalid}" />
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('username')?.hasError('required')">
        Username is required
      </div>
    </div>

    <!-- Email -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold">Email</label>
      <input type="email" formControlName="email" class="w-full border p-2 rounded"
             [ngClass]="{
               'border-red-500': isSubmitted && userForm.get('email')?.invalid || emailExists
             }" />
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('email')?.hasError('required')">
        Email is required
      </div>
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('email')?.hasError('email')">
        Please enter a valid email
      </div>
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('email')?.hasError('emailExists')">
        This email is already registered. Please use a different email.
      </div>
    </div>

    <!-- Password -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold">Password</label>
      <input type="password" formControlName="password" class="w-full border p-2 rounded"
             [ngClass]="{'border-red-500': isSubmitted && userForm.get('password')?.invalid}" />
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('password')?.hasError('required')">
        Password is required
      </div>
    </div>

    <!-- Status -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold">Status</label>
      <select formControlName="status" class="w-full border p-2 rounded">
        <option value="Active">Active</option>
        <option value="Inactive">Inactive</option>
      </select>
    </div>

    <!-- Role -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold">Role</label>
      <select formControlName="roleName" class="w-full border p-2 rounded"
              [ngClass]="{'border-red-500': isSubmitted && userForm.get('roleName')?.invalid}">
        <option value="">Select a role</option>
        <option *ngFor="let role of roles" [value]="role.name">{{ role.name }}</option>
      </select>
      <div class="text-red-600 text-sm mt-1" *ngIf="isSubmitted && userForm.get('roleName')?.hasError('required')">
        Role is required
      </div>
    </div>

    <!-- Register Button -->
    <div class="mt-6">
      <button type="submit" class="w-full bg-blue-700 hover:bg-blue-800 text-white font-semibold py-2 rounded">
        Register
      </button>
    </div>

  </form>
</div>
