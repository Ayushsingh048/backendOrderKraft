<!-- Top Navigation Bar -->
<nav class="bg-gray-800 z-50 relative">
  <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
    <div class="relative flex h-16 items-center justify-between">
      <!-- Logo and Tabs -->
      <div class="flex items-center">
        <img class="h-8 w-auto" src="newlogo.png" alt="OrderKraft" />
        <div class="hidden sm:ml-6 sm:block ml-6">
          <div class="flex space-x-4">
            <button type="button" (click)="setActiveTab('dashboard')"
              [ngClass]="activeTab === 'dashboard' ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'"
              class="rounded-md px-3 py-2 text-sm font-medium">Dashboard</button>

            <button type="button" (click)="setActiveTab('products')"
              [ngClass]="activeTab === 'products' ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'"
              class="rounded-md px-3 py-2 text-sm font-medium">Products</button>

            <button type="button" (click)="setActiveTab('units')"
              [ngClass]="activeTab === 'units' ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'"
              class="rounded-md px-3 py-2 text-sm font-medium">Units</button>

            <button type="button" (click)="setActiveTab('schedules')"
              [ngClass]="activeTab === 'schedules' ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'"
              class="rounded-md px-3 py-2 text-sm font-medium">Schedules</button>

            <button type="button" (click)="setActiveTab('tasks')"
              [ngClass]="activeTab === 'tasks' ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'"
              class="rounded-md px-3 py-2 text-sm font-medium">Tasks</button>
          </div>
        </div>
      </div>

      <!-- Profile Icon and Dropdown -->
      <div class="relative">
        <button (click)="toggleDropdown()" type="button"
          class="flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white">
          <img class="h-8 w-8 rounded-full" src="pm.jpg" alt="User" />
        </button>
        <div *ngIf="showDropdown"
             class="absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 z-50">
          <a href="#" class="block px-4 py-2 text-sm text-gray-700">View Profile</a>
          <a href="#" class="block px-4 py-2 text-sm text-gray-700">Settings</a>
          <a href="#" (click)="logout()" class="block px-4 py-2 text-sm text-gray-700">Sign Out</a>

        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Dashboard Tab -->
<div *ngIf="activeTab === 'dashboard'" class="p-6 max-w-7xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">
    Welcome {{ username }}, Role - {{ roleName }}
  </h2>
</div>

<!-- Products Tab -->
<div *ngIf="activeTab === 'products'" class="p-6 max-w-7xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Product List</h2>
  <div class="overflow-x-auto rounded-lg shadow ring-1 ring-black ring-opacity-5">
    <table class="min-w-full divide-y divide-gray-200 bg-white">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold">Product ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Name</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Description</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Price</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Category</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <tr *ngFor="let product of paginate(products, 'products')">
          <td class="px-6 py-4 text-sm text-gray-900">{{ product.product_id }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ product.name }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ product.description }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">â‚¹{{ product.unit_price | number:'1.2-2' }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ product.category?.name }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="flex justify-between mt-4">
    <button (click)="prevPage('products')" [disabled]="currentPages['products'] === 1"
      class="px-4 py-2 bg-gray-300 rounded">Previous</button>
    <span class="px-4 py-2">Page {{ currentPages['products'] }} of {{ totalPages(products) }}</span>
    <button (click)="nextPage('products', products)" [disabled]="currentPages['products'] === totalPages(products)"
      class="px-4 py-2 bg-gray-300 rounded">Next</button>
  </div>
</div>

<!-- Units Tab -->
<div *ngIf="activeTab === 'units'" class="p-6 max-w-7xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Production Units</h2>
  <div class="overflow-x-auto rounded-lg shadow ring-1 ring-black ring-opacity-5">
    <table class="min-w-full divide-y divide-gray-200 bg-white">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold">Unit ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Unit Name</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Capacity</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <tr *ngFor="let unit of paginate(units, 'units')">
          <td class="px-6 py-4 text-sm text-gray-900">{{ unit.unitId }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ unit.name }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ unit.capacity }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="flex justify-between mt-4">
    <button (click)="prevPage('units')" [disabled]="currentPages['units'] === 1"
      class="px-4 py-2 bg-gray-300 rounded">Previous</button>
    <span class="px-4 py-2">Page {{ currentPages['units'] }} of {{ totalPages(units) }}</span>
    <button (click)="nextPage('units', units)" [disabled]="currentPages['units'] === totalPages(units)"
      class="px-4 py-2 bg-gray-300 rounded">Next</button>
  </div>
</div>

<!-- Schedules Tab -->
<div *ngIf="activeTab === 'schedules'" class="p-6 max-w-7xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Production Schedules</h2>
  <div class="overflow-x-auto rounded-lg shadow ring-1 ring-black ring-opacity-5">
    <table class="min-w-full divide-y divide-gray-200 bg-white">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold">Schedule ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Start Date</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">End Date</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Status</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <tr *ngFor="let schedule of paginate(schedules, 'schedules')">
          <td class="px-6 py-4 text-sm text-gray-900">{{ schedule.scheduleId }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ schedule.startDate }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ schedule.endDate }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ schedule.status }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="flex justify-between mt-4">
    <button (click)="prevPage('schedules')" [disabled]="currentPages['schedules'] === 1"
      class="px-4 py-2 bg-gray-300 rounded">Previous</button>
    <span class="px-4 py-2">Page {{ currentPages['schedules'] }} of {{ totalPages(schedules) }}</span>
    <button (click)="nextPage('schedules', schedules)" [disabled]="currentPages['schedules'] === totalPages(schedules)"
      class="px-4 py-2 bg-gray-300 rounded">Next</button>
  </div>
</div>



<!-- Tasks Tab -->
<div *ngIf="activeTab === 'tasks'" class="p-6 max-w-7xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Production Tasks</h2>
  <div class="overflow-x-auto rounded-lg shadow ring-1 ring-black ring-opacity-5">
    <table class="min-w-full divide-y divide-gray-200 bg-white">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold">Task ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Schedule ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Name</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Description</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Start Time</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">End Time</th>
          <th class="px-6 py-3 text-left text-sm font-semibold">Status</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <tr *ngFor="let task of paginate(tasks, 'tasks')">
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.taskId }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.productionSchedule?.scheduleId }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.name }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.description}}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.startTime }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.endTime }}</td>
          <td class="px-6 py-4 text-sm text-gray-900">{{ task.status }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="flex justify-between mt-4">
    <button (click)="prevPage('tasks')" [disabled]="currentPages['tasks'] === 1"
      class="px-4 py-2 bg-gray-300 rounded">Previous</button>
    <span class="px-4 py-2">Page {{ currentPages['tasks'] }} of {{ totalPages(tasks) }}</span>
    <button (click)="nextPage('tasks', tasks)" [disabled]="currentPages['tasks'] === totalPages(tasks)"
      class="px-4 py-2 bg-gray-300 rounded">Next</button>
  </div>
</div>

